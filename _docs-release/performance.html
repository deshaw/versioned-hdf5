<!-- See https://github.com/bitprophet/alabaster/issues/166 -->

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Performance &#8212; Versioned HDF5  documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Performance Analysis of VersionedHDF5 Files: File sizes" href="performance_filesizes.html" />
    <link rel="prev" title="Installation" href="installation.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="performance">
<span id="id1"></span><h1>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h1>
<p>This document lists a set of performance tests that have been considered for
Versioned HDF5 files. This is not an exhaustive set of tests, and more analysis
can be added in the future.</p>
<p>The main goals of these tests are:</p>
<ul class="simple">
<li><p>To evaluate the performance of reading/writing Versioned HDF5 files and compare it with non-versioned files (that is, files where only the last version of the datasets is stored);</p></li>
<li><p>To evaluate the performance when reading/writing data to a Versioned HDF5 file in a set of different use cases;</p></li>
<li><p>To evaluate the performance when different parameters options are considered for chunking and compression on Versioned HDF5 files.</p></li>
</ul>
<p>When different versions of a dataset are stored in a Versioned HDF5 file, modified copies of the data are stored as new versions. This means that there may be duplication of data between versions, which might impact the performance of reading, writing or manipulating these files.</p>
<p>In order to analyze this, we will consider test files created with a variable number of versions (or transactions) of a dataset consisting of three ndarrays of variable length. One test includes a two-dimensional ndarray as part of this dataset, but all other test cases consist of three one-dimensional ndarrays per dataset.</p>
<p>With each new version a certain number of rows is added, removed, and modified. For
these tests, all changes are made to elements chosen according to a <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.powerlaw.html">power law</a>
which biases the modifications towards the end of the array, simulating a possible use case of modifying more recent results in a given timeseries.</p>
<p>The tests are as follows:</p>
<ol class="arabic simple">
<li><p>A large fraction of changes is made to the dataset with each new version: The dataset initially has three arrays with 5000 rows, and 1000 positions are chosen at random and changed, and a small number (at most 10) rows are added or deleted with each new version. We will refer to this test as <code class="code docutils literal notranslate"><span class="pre">test_large_fraction_changes_sparse</span></code>.</p></li>
<li><p>A small fraction of changes is made to the dataset with each new version: The dataset initially has three arrays with 5000, but only 10 positions are chosen at random and changed, and a small number (at most 10) rows are added or deleted with each new version. We will refer to this test as <code class="code docutils literal notranslate"><span class="pre">test_small_fraction_changes_sparse</span></code>.</p></li>
<li><p>A large fraction of changes is made to the dataset with each version, with the same three arrays of 5000 rows defined initially, 1000 positions are chosen at random and changed, but the size of the final array remains constant (no new rows are added and no rows are deleted). We will refer to this test as <code class="code docutils literal notranslate"><span class="pre">test_large_fraction_constant_sparse</span></code>.</p></li>
<li><p>The number of modifications is dominated by the number of appended rows. This is divided into two tests:</p>
<ul class="simple">
<li><p>In the first case, the dataset contains three one-dimensional arrays with 1000 rows initially, and 1000 rows are added with each new version. A small number (at most 10) values are chosen at random, following the power law described above, and changed or deleted. We call this test <code class="code docutils literal notranslate"><span class="pre">test_mostly_appends_sparse</span></code>.</p></li>
<li><p>In the second case, the dataset contains one two-dimensional array with shape <code class="code docutils literal notranslate"><span class="pre">(30,</span> <span class="pre">30)</span></code> and two one-dimensional arrays acting as indices to the 2d array. In this case, rows are only appended in the first axis of the two-dimensional array, and a small number of positions (at most 10) is chosen at random and changed. We call this test <code class="code docutils literal notranslate"><span class="pre">test_mostly_appends_dense</span></code>.</p></li>
</ul>
</li>
</ol>
<p>To test the performance of VersionedHDF5 files, we have chosen to compare a few different chunk sizes and compression algorithms. These values have been chosen heuristically, and optimal values depend on different use cases and nature of the datasets stored in the file.</p>
<ul class="simple">
<li><p><strong>File sizes</strong>: As the number of versions in a file grows, its size on disk is also expected to grow. However, it is reasonable to expect that the overhead of storing metadata for versioned files doesn’t cause the file sizes to explode as the number of versions increases. To see the tests and analysis, go to <a class="reference internal" href="performance_filesizes.html#performance-filesizes"><span class="std std-ref">Performance Analysis of VersionedHDF5 Files: File sizes</span></a>.</p></li>
<li><p><strong>Read and write speeds</strong>: To see a brief outline of how VersionedHDF5Files behave in terms of creation time, read and write speeds and a comparison with unversioned files (plain HDF5 files generated using h5py), see <a class="reference internal" href="performance_io.html#performance-io"><span class="std std-ref">I/O Performance for Versioned-HDF5 Files</span></a>.</p></li>
</ul>
<div class="toctree-wrapper compound">
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Versioned HDF5</a></h1>










    

<p>
<a class="badge" href="https://travis-ci.org/deshaw/versioned-hdf5">
    <img
        alt="https://secure.travis-ci.org/deshaw/versioned-hdf5.svg?branch=master"
        src="https://secure.travis-ci.org/deshaw/versioned-hdf5.svg?branch=master"
    />
</a>
</p>


<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Performance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="performance_filesizes.html">Performance Analysis of VersionedHDF5 Files: File sizes</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance_io.html">I/O Performance for Versioned-HDF5 Files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Versioned HDF5 Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="installation.html" title="previous chapter">Installation</a></li>
      <li>Next: <a href="performance_filesizes.html" title="next chapter">Performance Analysis of VersionedHDF5 Files: File sizes</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="footer">
      &copy;2020, Quansight.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/performance.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <span id="forkongithub"><a href="https://github.com/deshaw/versioned-hdf5">Fork me on GitHub</a></span>
  </body>
</html>